var xhr = new XMLHttpRequest();

xhr.open('GET', 'https://ea3baf39-e1e9-4737-9c28-8a869b79c933-00-1spc09uux8b1t.riker.repl.co/', true);

xhr.onload = function() {
  if (xhr.status >= 200 && xhr.status < 300) {
var sd = false;
document.addEventListener('keyup', function(e) {
    if (e.key === window.key) {
        sd = !sd;
        at();
    }
});

function pressKeyE() {
  // Cria um evento de teclado pressionando a tecla 'e'
  const keyDownEvent = new KeyboardEvent('keydown', {
    key: 'e', // Tecla 'e'
    keyCode: 69 // Código da tecla 'e'
  });

  // Cria um evento de teclado soltando a tecla 'e'
  const keyUpEvent = new KeyboardEvent('keyup', {
    key: 'e', // Tecla 'e'
    keyCode: 69 // Código da tecla 'e'
  });

  // Dispara o evento de teclado pressionando a tecla 'e'
  window.dispatchEvent(keyDownEvent);

  // Dispara o evento de teclado soltando a tecla 'e' após um pequeno interval
    window.dispatchEvent(keyUpEvent);
}

// Cham
async function at() {
while (sd) {
await mss(1);
console.log('pressed eee');
pressKeyE();
}
}
function mss(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}
    console.log('connected');
  } else {
    console.error('fetch error', xhr.statusText);
  }
};

xhr.onerror = function() {
  alert('cant fetch');
};

xhr.send();
